<!DOCTYPE html>
<html lang="en">
<head>
<title>Menubar</title>
<style>
    /* Reset some default styles for consistency */
    body, h1, nav, ul, li {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .menubar ul {
      display: flex;
    }

    .menubar a {
      background-color: #f0f0f0;
      text-decoration: none;
      color: #333;
      padding: 5px 10px;
    }

    .menubar a:hover {
      background-color: #ddd;
    }

    .menubar a:focus {
      outline: none;
      background-color: #ccc;
    }

    /* Submenu style */
    .submenu {
      display: none;
      background-color: #f0f0f0;
      padding: 10px;
    }

    .submenu a {
      text-decoration: none;
      color: #333;
      padding: 5px 10px;
    }

    /* Show submenu when parent item is focused or hovered */
    .menubar li:focus .submenu,
    .menubar li:hover .submenu {
      display: inline-block;
    }
</style>
</head>
<body>
  <header>
    <h1>MenuBar Example</h1>
  </header>
  <nav>
    <div class="menubar" id="menubar">
        <ul>
            <li>
                <a class="menu" role="menuitem" href="#home">Home</a>
            </li>
            <li>
                <a class="menu" role="menuitem" href="#overview">Admissions</a>
                <div class="submenu">
                    <a role="menuitem" href="#meetingroom">Apply</a>
                    <a role="menuitem" href="#mainhall">Tuition</a>
                    <a role="menuitem" href="#cabin">Academics</a>
                </div>
            </li>
            <li>
                <a class="menu" role="menuitem" href="#aboutus">About Us</a>
                <div class="submenu">
                    <a role="menuitem" href="#team">Overview</a>
                    <a role="menuitem" href="#mission">Contact Us</a>
                </div>
            </li>
        </ul>
    </div>
  </nav>      
  <script>

    document.addEventListener('keydown', closeSubmenus);

    // Function to handle keyboard navigation
    function handleNavigation(event) {
      const key = event.key;
      const currentLink = event.target;
      const parentItem = currentLink.parentNode;

      if (key === 'ArrowDown') {
        const submenu = parentItem.querySelector('.submenu');
        if (submenu && submenu.style.display !== 'block') {
          event.preventDefault();
          closeSubmenus();
          submenu.style.display = 'block';
          const submenuLinks = submenu.querySelectorAll('a');
          if (submenuLinks.length > 0) {
            submenuLinks[0].focus();
          }
        }
        }else if (key === 'ArrowRight') {
            const nextItem = parentItem.nextElementSibling;
            if (nextItem) {
              const nextLink = nextItem.querySelector('.menu');
              nextLink.focus();
              console.log(nextLink)
            }
          } else if (key === 'ArrowLeft') {
            const prevItem = parentItem.previousElementSibling;
            if (prevItem) {
              const prevLink = prevItem.querySelector('.menu');
              prevLink.focus();
            }
          }
        }

    // Function to close all submenus
    function closeSubmenus() {
        const submenus = document.querySelectorAll('.submenu');
        const key = event.key;
        const prevkey = key.previousElementSibling;

        if (key === 'Escape') {
        submenus.forEach((submenu) => {
          submenu.style.display = 'none';
        });
        submenus.focus();
        }
    } 

    // Attach event listeners to menu items
    const menuItems = document.querySelectorAll('.menubar a');
    menuItems.forEach((item) => {
      item.addEventListener('keydown', handleNavigation);
    });


  </script>
</body>
</html>