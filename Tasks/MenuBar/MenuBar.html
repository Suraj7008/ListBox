<!DOCTYPE html>
<html lang="en">
<head>
<title>Menubar</title>
<style>
    /* Reset some default styles for consistency */
    body, h1, nav {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .menubar {
      display: flex;
    }

    .menubar a {
      background-color: #f0f0f0;
      text-decoration: none;
      color: #333;
      padding: 5px 20px;
    }

    .menubar a:hover {
      background-color: #ddd;
    }

    .menubar a:focus {
      outline: none;
      background-color: #ccc;
    }

    /* Submenu style */
    .submenu {
      display: none;
      background-color: #f0f0f0;
    }

    .submenu a {
        display:list-item;
    }

    /* Show submenu when parent item is focused or hovered */
    .menubar li:focus .submenu,
    .menubar li:hover .submenu {
        display: block;
    } 

</style>
</head>

<body>
  <header>
    <h1>MenuBar Example</h1>
  </header>
  <br>
  <nav>
    <div class="menubar" id="menubar">
            <div role="menu">
                <a role="menuitem" class="menu" aria-label="Home"  tabindex="0">Home</a>
            </div>
            <div role="menu">
                <a role="menuitem" class="menu" aria-label="Admissions" tabindex="-1">Admissions</a>
                <div class="submenu">
                    <a role="menuitem" aria-label="Apply" tabindex="-1">Apply</a>
                    <a role="menuitem" aria-label="Tuition" tabindex="-1">Tuition</a>
                    <a class="submenu1" aria-label="Academics" role="menuitem" tabindex="-1">Academics</a>
                </div>
            </div>
            <div role="menu">
                <a role="menuitem" class="menu" aria-label="About Us" tabindex="-1">About Us</a>
                <div class="submenu">
                    <a role="menuitem" aria-label="Overview" tabindex="-1">Overview</a>
                    <a class="submenu2" aria-label="Contact Us" role="menuitem" tabindex="-1">Contact Us</a>
                </div>
            </div> 
    </div>
</nav>
 
<script>
    document.addEventListener('keydown', handleNavigation, handleSubmenuNavigation);
    // Function to handle keyboard navigation
    function handleNavigation(event) {
    const currentMenuItem = event.target;
    const parentMenuItem = currentMenuItem.parentElement;
    const siblingMenuItems = Array.from(parentMenuItem.parentElement.children);
    const currentIndex = siblingMenuItems.indexOf(parentMenuItem);

    switch (event.key) {
        case 'ArrowLeft':
            event.preventDefault();
            if (currentIndex > 0) {
                siblingMenuItems[currentIndex - 1].querySelector('.menu').focus();
            }
            break;

        case 'ArrowRight':
            event.preventDefault();
            if (currentIndex < siblingMenuItems.length - 1) {
                siblingMenuItems[currentIndex + 1].querySelector('.menu').focus();
            }
            break;

        case 'ArrowDown':
            const submenu = parentMenuItem.querySelector('.submenu');

            if (submenu && submenu.style.display !== 'block') {
                event.preventDefault();
                submenu.style.display = 'block';
                const submenuLinks = submenu.querySelectorAll('a');
                if (submenuLinks.length > 0) {
                    submenuLinks[0].focus();
                }   
            }
            break;

            case 'ArrowUp':
            const Usubmenu = parentMenuItem.querySelector('.submenu');

            if (Usubmenu && Usubmenu.style.display !== 'block') {
                event.preventDefault();
                Usubmenu.style.display = 'block';
                const submenuLinks = Usubmenu.querySelectorAll('a');
                if (submenuLinks.length > 0) {
                    document.querySelector('.submenu1').focus();
                    document.querySelector('.submenu2').focus();
                }   
            }
            break;

        case 'Escape':
            event.preventDefault();
            closeSubmenus();
            const parentItem = parentMenuItem.previousElementSibling;
            if (parentItem) {
                parentItem.focus();
            } else {
                document.querySelector('.menubar a').focus();
            }
            break;
    }
}


    // Function to handle submenu navigation
    function handleSubmenuNavigation(event) {
        const key = event.key;
        const currentLink = event.target;
        const parentItem = currentLink.parentNode.parentNode;
        const submenu = parentItem.querySelector('.submenu');

        switch (event.key) {
            case 'ArrowDown':
                if (key === 'ArrowDown') {

                    const nextLink = currentLink.nextElementSibling;
                    if (nextLink) {
                      nextLink.focus();
                    
                    } else {
                      const firstLink = submenu.querySelector('a');
                        if (firstLink) {
                            firstLink.focus();
                        }
                    }
                }
            break;

            case 'ArrowUp':
                if (key === 'ArrowUp') {

                const prevLink = currentLink.previousElementSibling;
                  if (prevLink) {
                      prevLink.focus();
                      
                  } else {
                        document.querySelector('.submenu1').focus();
                        document.querySelector('.submenu2').focus();
                  }
            }
            break;

            case 'ArrowRight': 
            if (key === 'ArrowRight') {
                 event.preventDefault();
                             const nextItem = parentItem.nextElementSibling;
                     const nextLink = nextItem.querySelector('a');
                     if (nextItem) {
                        nextLink.focus();
                    }
                    submenu.style.display = 'none';
                }
            break;

            case 'ArrowLeft':
            if (key === 'ArrowLeft') {
                const prevItem = parentItem.previousElementSibling;
                const prevLink = prevItem.querySelector('a');
                if (prevItem) {
                      prevLink.focus();
                }
                submenu.style.display = 'none';
            }
            break;

    }
}

            function closeSubmenus(event) {
              const submenu = document.querySelectorAll('.submenu');
              submenu.forEach ((submenu) =>{
                submenu.style.display='none';
              });
            }

    // Attach event listeners to submenu items
    const submenuItems = document.querySelectorAll('.submenu a');
    
        submenuItems.forEach((item) => {
          item.addEventListener('keydown', handleSubmenuNavigation);
        });
    
    // Attach event listeners to menu items
    const menuItems = document.querySelectorAll('.menubar a');
        menuItems.forEach((item) => {
          item.addEventListener('keydown', handleNavigation);
        });

</script>
</body>
</html>