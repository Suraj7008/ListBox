<!DOCTYPE html>
<html lang="en">
<head>
<title>Menubar</title>
<style>
    /* Reset some default styles for consistency */
    body, h1, nav, ul, li {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .menubar ul {
      display: flex;
    }

    .menubar a {
      background-color: #f0f0f0;
      text-decoration: none;
      color: #333;
      padding: 5px 10px;
    }

    .menubar a:hover {
      background-color: #ddd;
    }

    .menubar a:focus {
      outline: none;
      background-color: #ccc;
    }

    /* Submenu style */
    .submenu {
      display: none;
      background-color: #f0f0f0;
      padding: 10px;
    }

    .submenu a {
      text-decoration: none;
      color: #333;
      padding: 5px 10px;
    }

    /* Show submenu when parent item is focused or hovered */
    .menubar li:focus .submenu,
    .menubar li:hover .submenu {
      display: inline-block;
    }
</style>
</head>
<body>
  <header>
    <h1>MenuBar Example</h1>
  </header>
  <nav>
    <div class="menubar" id="menubar">
        <ul>
            <li>
                <a class="menu" role="menuitem" href="#home" tabindex="1">Home</a>
            </li>
            <li>
                <a class="menu" role="menuitem" href="#overview" tabindex="2">Admissions</a>
                <div class="submenu">
                    <a role="menuitem" href="#meetingroom" tabindex="3">Apply</a>
                    <a role="menuitem" href="#mainhall" tabindex="4">Tuition</a>
                    <a role="menuitem" href="#cabin" tabindex="5">Academics</a>
                </div>
            </li>
            <li>
                <a class="menu" role="menuitem" href="#aboutus" tabindex="6">About Us</a>
                <div class="submenu">
                    <a role="menuitem" href="#team" tabindex="7">Overview</a>
                    <a role="menuitem" href="#mission" tabindex="8">Contact Us</a>
                </div>
            </li>
        </ul>
    </div>
</nav>
 
  <script>
    
    // Function to handle keyboard navigation
    function handleNavigation(event) {
        const currentMenuItem = event.target;
        const parentMenuItem = currentMenuItem.parentElement;
        const siblingMenuItems = Array.from(parentMenuItem.parentElement.children).filter(child => child.tagName === 'LI');
        const currentIndex = siblingMenuItems.indexOf(parentMenuItem);

        switch (event.key) {
            case 'ArrowLeft':
                event.preventDefault();
                if (currentIndex > 0) {
                    siblingMenuItems[currentIndex - 1].querySelector('.menu').focus();
                }
                break;

            case 'ArrowRight':
                event.preventDefault();
                if (currentIndex < siblingMenuItems.length - 1) {
                    siblingMenuItems[currentIndex + 1].querySelector('.menu').focus();
                }
                break;

            case 'ArrowDown':
                const submenu = parentMenuItem.querySelector('.submenu');

                    if (submenu && submenu.style.display !== 'block') {
                      event.preventDefault();
                      submenu.style.display = 'block';
                      const submenuLinks = submenu.querySelectorAll('a');
                      if (submenuLinks.length > 0) {
                        submenuLinks[0].focus();
                    }   
                }
                break;
            
            case 'Escape':
                const submenus = document.querySelectorAll('.submenu');
                const key = event.key;
                const prevkey = key.previousElementSibling;

                    if (key === 'Escape') {
                        submenus.forEach((submenu) => {
                        submenu.style.display = 'none';
                        });
                        submenus.focus();
                    }
                break;
        }
    }

    // Attach event listeners to menu items
    const menuItems = document.querySelectorAll('.menubar a');
        menuItems.forEach((item) => {
          item.addEventListener('keydown', handleNavigation);
        });

    // Function to handle submenu navigation
    function handleSubmenuNavigation(event) {
        const key = event.key;
        const currentLink = event.target;
        const parentItem = currentLink.parentNode.parentNode;
        const submenu = parentItem.querySelector('.submenu');

        if (key === 'ArrowRight') {
              event.preventDefault();
              
              const nextLink = currentLink.nextElementSibling;

              if (nextLink) {
                nextLink.focus();

        } else {

                const firstLink = submenu.querySelector('a');

            if (firstLink) {
                  firstLink.focus();
            }
          }

        } else if (key === 'ArrowLeft') {
              event.preventDefault();
              
              const prevLink = currentLink.previousElementSibling;
              
            if (prevLink) {
                prevLink.focus();
            } else {
                parentItem.querySelector('a').focus();
            }
        }
    }

    // Attach event listeners to submenu items
    const submenuItems = document.querySelectorAll('.submenu a');
    
    submenuItems.forEach((item) => {
          item.addEventListener('keydown', handleSubmenuNavigation);
        });

  </script>
</body>
</html>